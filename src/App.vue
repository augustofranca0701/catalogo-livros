<template>
  <div class="p-6">
    <nav class="flex gap-6 mb-8">
      <RouterLink to="/" class="text-blue-600 hover:underline">CRUD Livros</RouterLink>
      <RouterLink to="/api" class="text-blue-600 hover:underline">Buscar na API</RouterLink>
    </nav>
    <RouterView />
  </div>
  <div class="container mx-auto p-6">
    <h1 class="text-4xl font-bold mb-8 text-center">CatÃ¡logo de Livros ðŸ“š</h1>
    <LivroForm @atualizar="carregarLivros" :livroEdit="livroEdit"/>
    <LivroList :livros="livros" @editar="editarLivro" @atualizar="carregarLivros"/>
  </div>
</template>

<script>
import LivroForm from './components/LivroForm.vue'
import LivroList from './components/LivroList.vue'

export default {
  components: {
    LivroForm,
    LivroList
  },
  data() {
    return {
      livros: [],
      livroEdit: null
    }
  },
  methods: {
    async carregarLivros() {
      const res = await fetch('http://localhost:3000/livros');
      this.livros = await res.json();
    },
    editarLivro(livro) {
      this.livroEdit = livro;
    }
  },
  mounted() {
    this.carregarLivros();
  }
}
</script>
